CREATE TABLE `USERS` (
    `user_id` int NOT NULL AUTO_INCREMENT,
    `user_name` varchar(30) NOT NULL,
    `user_pass` varchar(255) NOT NULL,
    `EMAIL` varchar(30) NOT NULL,
    `PHONE` varchar(30) NOT NULL,
    `CREATED_DATE` timestamp NULL DEFAULT CURRENT_TIMESTAMP,
    `UPDATED_DATE` timestamp NULL DEFAULT CURRENT_TIMESTAMP,
    PRIMARY KEY (`user_id`),
    UNIQUE KEY `UK21q8fvry4wix31petp1awxsx9` (`user_name`),
    UNIQUE KEY `UKavh1b2ec82audum2lyjx2p1ws` (`EMAIL`)
);

CREATE TABLE `roles` (
    `role_id` int NOT NULL AUTO_INCREMENT,
    `name` varchar(60) NOT NULL,
    `created_at` timestamp NULL DEFAULT CURRENT_TIMESTAMP,
    `updated_at` timestamp NULL DEFAULT CURRENT_TIMESTAMP,
    PRIMARY KEY (`role_id`),
    UNIQUE KEY `user_roles_name_unique` (`name`)
);

CREATE TABLE `user_roles` (
    `user_id` int NOT NULL,
    `role_id` int NOT NULL,
    `created_at` timestamp NULL DEFAULT CURRENT_TIMESTAMP,
    `updated_at` timestamp NULL DEFAULT CURRENT_TIMESTAMP,
    PRIMARY KEY (`user_id`,`role_id`),
    KEY `fk_user_roles_role_id` (`role_id`),
    CONSTRAINT `fk_user_roles_role_id` FOREIGN KEY (`role_id`) REFERENCES `roles` (`role_id`),
    CONSTRAINT `fk_user_roles_user_id` FOREIGN KEY (`user_id`) REFERENCES `users` (`user_id`)
);

CREATE TABLE `PATIENT_DETAILS` (
    `PATIENT_ID` int NOT NULL AUTO_INCREMENT,
    `PATIENT_NAME` varchar(20) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL,
    `age` int DEFAULT NULL,
    `gender` varchar(6) DEFAULT NULL,
    `CREATED_DATE` timestamp NULL DEFAULT CURRENT_TIMESTAMP,
    `UPDATED_DATE` timestamp NULL DEFAULT CURRENT_TIMESTAMP,
    `USER_ID` int DEFAULT NULL,
    `DOB` timestamp NULL DEFAULT NULL,
    PRIMARY KEY (`PATIENT_ID`),
    KEY `FK_PATIENT_USER_ID` (`USER_ID`),
    CONSTRAINT `FK_PATIENT_USER_ID` FOREIGN KEY (`USER_ID`) REFERENCES `USERS` (`user_id`)
);

CREATE TABLE `DOCTOR_DETAILS` (
    `DOCTOR_ID` int NOT NULL AUTO_INCREMENT,
    `DOCTOR_NAME` varchar(20) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL,
    `specialist` varchar(20) DEFAULT NULL,
    `experience` varchar(20) DEFAULT NULL,
    `age` int DEFAULT NULL,
    `CREATED_DATE` timestamp NULL DEFAULT CURRENT_TIMESTAMP,
    `UPDATED_DATE` timestamp NULL DEFAULT CURRENT_TIMESTAMP,
    `USER_ID` int DEFAULT NULL,
    PRIMARY KEY (`DOCTOR_ID`),
    KEY `FK_DOCTOR_USER_ID` (`USER_ID`),
    CONSTRAINT `FK_DOCTOR_USER_ID` FOREIGN KEY (`USER_ID`) REFERENCES `USERS` (`user_id`)
);

CREATE TABLE `APPOINTMENT_DETAILS` (
    `APPOINT_ID` int NOT NULL AUTO_INCREMENT,
    `PATIENT_ID` int DEFAULT NULL,
    `DOCTOR_ID` int DEFAULT NULL,
    `CONSULTATION` int DEFAULT NULL,
    `DESCRIPTION` varchar(200) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT NULL,
    `CREATED_DATE` timestamp NULL DEFAULT CURRENT_TIMESTAMP,
    `UPDATED_DATE` timestamp NULL DEFAULT CURRENT_TIMESTAMP,
    `APPOINTMENT_DATE` timestamp NULL DEFAULT CURRENT_TIMESTAMP,
    PRIMARY KEY (`APPOINT_ID`),
    KEY `fk_app_patient_id` (`PATIENT_ID`),
    KEY `fk_app_doctor_id` (`DOCTOR_ID`),
    CONSTRAINT `fk_app_doctor_id` FOREIGN KEY (`DOCTOR_ID`) REFERENCES `DOCTOR_DETAILS` (`DOCTOR_ID`),
    CONSTRAINT `fk_app_patient_id` FOREIGN KEY (`PATIENT_ID`) REFERENCES `PATIENT_DETAILS` (`PATIENT_ID`)
);

CREATE TABLE `ADMIN_DETAILS` (
    `ADMIN_ID` int NOT NULL AUTO_INCREMENT,
    `ADMIN_NAME` varchar(20) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL,
    `age` int DEFAULT NULL,
    `gender` varchar(6) DEFAULT NULL,
    `CREATED_DATE` timestamp NULL DEFAULT CURRENT_TIMESTAMP,
    `UPDATED_DATE` timestamp NULL DEFAULT CURRENT_TIMESTAMP,
    `USER_ID` int DEFAULT NULL,
    PRIMARY KEY (`ADMIN_ID`),
    KEY `FK_ADMIN_USER_ID` (`USER_ID`),
    CONSTRAINT `FK_ADMIN_USER_ID` FOREIGN KEY (`USER_ID`) REFERENCES `USERS` (`user_id`)
) ;

CREATE TABLE `ADDRESS_DETAILS` (
    `ADDR_ID` int NOT NULL AUTO_INCREMENT,
    `STREET` varchar(30) NOT NULL,
    `CITY` varchar(30) NOT NULL,
    `STATE` varchar(30) NOT NULL,
    `ZIP` varchar(30) NOT NULL,
    `ADDR_PATIENT_ID` int DEFAULT NULL,
    `ADDR_DOCTOR_ID` int DEFAULT NULL,`ADDR_ADMIN_ID` int DEFAULT NULL,
    `created_at` timestamp NULL DEFAULT CURRENT_TIMESTAMP,
    `updated_at` timestamp NULL DEFAULT CURRENT_TIMESTAMP,
    PRIMARY KEY (`ADDR_ID`),
    KEY `FK_ADDR_PATIENT_ID` (`ADDR_PATIENT_ID`),
    KEY `FK_ADDR_DOCTOR_ID` (`ADDR_DOCTOR_ID`),
    KEY `FK_ADDR_ADMIN_ID` (`ADDR_ADMIN_ID`),
    CONSTRAINT `FK_ADDR_ADMIN_ID` FOREIGN KEY (`ADDR_ADMIN_ID`) REFERENCES `ADMIN_DETAILS` (`ADMIN_ID`),
    CONSTRAINT `FK_ADDR_DOCTOR_ID` FOREIGN KEY (`ADDR_DOCTOR_ID`) REFERENCES `DOCTOR_DETAILS` (`DOCTOR_ID`),
    CONSTRAINT `FK_ADDR_PATIENT_ID` FOREIGN KEY (`ADDR_PATIENT_ID`) REFERENCES `PATIENT_DETAILS` (`PATIENT_ID`)
);



